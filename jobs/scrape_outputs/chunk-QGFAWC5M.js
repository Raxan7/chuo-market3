import{$ as h,L as R,M as S,N as p,O,P as V,R as q,S as G,_ as k,aa as $,g as f,h as Q,i as L,j as D,k as F,l as M,m as N,n as b}from"./chunk-AAWWFKJM.js";import{B as c,Sa as E,Vb as T,f as A,i as I,ib as g,n as l,tc as d,uc as _,vc as C,wc as v,xc as P,z as m,zc as w}from"./chunk-G7BAKZIN.js";var Y=(()=>{let o=class o{constructor(e){this.apollo=e}getAcademicQualifications(){return this.apollo.watchQuery({query:f,fetchPolicy:"network-only"})}getAcademicQualification(e){return this.apollo.watchQuery({query:Q,variables:{qualificationId:e},fetchPolicy:"network-only"})}getInterviewTimetable(e){return this.apollo.query({query:D,variables:{input:e},fetchPolicy:"network-only"})}getAcademicProgrammesByLevelIdAndCategoryId(e,t){return this.apollo.use("secondary").watchQuery({query:q,fetchPolicy:"network-only",variables:{levelId:parseInt(e),categoryId:parseInt(t)}})}getAcademicProgrammesByLevel(e){return this.apollo.use("secondary").watchQuery({query:G,fetchPolicy:"network-only",variables:{levelId:e}})}getTcuVerifications(){return this.apollo.watchQuery({query:F,fetchPolicy:"network-only"})}getAcademicLevels(){return this.apollo.use("secondary").watchQuery({query:M,fetchPolicy:"network-only"})}getCategories(){return this.apollo.use("secondary").watchQuery({query:N,fetchPolicy:"network-only"})}getMyApplications(){return this.apollo.use("secondary").watchQuery({query:p,fetchPolicy:"network-only"})}getApplicantPlacementLetter(){return this.apollo.query({query:R,fetchPolicy:"network-only"})}checkApplicantPlacementLetterStatus(){return this.apollo.query({query:S,fetchPolicy:"network-only"})}updateApplicationAttachment(e,t,r){return this.apollo.mutate({mutation:O,variables:{input:{applicationId:e,file:t,attachmentId:r}},refetchQueries:[{query:p}],awaitRefetchQueries:!0}).pipe(l(i=>i?.data?.updateApplicationAttachment||null))}getAcademicInstitutions(){return this.apollo.use("secondary").watchQuery({query:b,fetchPolicy:"network-only"})}registerAcademicQualification(e){return this.apollo.mutate({mutation:d,variables:{input:e},refetchQueries:[{query:f},{query:L}]}).pipe(l(t=>t?.data?.registerAcademicQualification?.data||[]))}previewAttachments(e){return this.apollo.use("secondary").mutate({mutation:V,variables:{input:e}})}getAcademicQualificationsV2(){return this.apollo.use("secondary").watchQuery({query:h,fetchPolicy:"network-only"})}checkFormVerificationStatus(){return this.apollo.use("secondary").query({query:$,fetchPolicy:"network-only"})}verifyFormIndexNumber(e){return this.apollo.mutate({mutation:P,variables:{input:e},refetchQueries:[{query:h}]})}getCandidateHighestQualifications(e){return this.apollo.query({query:k,variables:{registrationNumber:e},fetchPolicy:"network-only"}).pipe(l(t=>t?.data?.getCandidateHighestQualifications||{}))}registerAcademicQualificationV2(e){return this.apollo.mutate({mutation:d,variables:{input:e},refetchQueries:["GetAcademicQualificationsV2"],awaitRefetchQueries:!0}).pipe(l(t=>t?.data?.registerAcademicQualificationV2||{}))}uploadQualificationDocument(e){return this.apollo.mutate({mutation:_,variables:{input:e},refetchQueries:["GetAcademicQualificationsV2"],awaitRefetchQueries:!0})}removeQualificationDocument(e,t,r){return this.apollo.mutate({mutation:C,variables:{qualificationId:e,documentId:t,documentType:r},refetchQueries:["GetAcademicQualificationsV2"],awaitRefetchQueries:!0})}removeAcademicQualification(e){return this.apollo.mutate({mutation:v,variables:{qualificationId:e},refetchQueries:["GetAcademicQualificationsV2"],awaitRefetchQueries:!0})}};o.\u0275fac=function(t){return new(t||o)(c(T))},o.\u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"});let s=o;return s})();var y={pdf_allowed_size:2e6,allowed_types:["application/pdf"]};var te=(()=>{let o=class o{constructor(e,t){this.datePipe=e,this.notificationService=t,this.validationPatterns={email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^[+]?[(]?[\d\s\-\(\)]{10,}$/,indexNumber:/^[A-Z]\d{4}-\d{4}$/,gpa:/^\d{1,2}(\.\d{1,2})?$/,year:/^\d{4}$/,registrationNumber:/^[A-Z0-9\-\/]+$/i}}dateFormat(e,t){return this.datePipe.transform(e,t)}validateFile(e){return y.allowed_types.includes(e.type)?e.size>y.pdf_allowed_size?{isValid:!1,error:`File size too large. Maximum size is 2MB. Your file is ${Math.round(e.size/1024)}KB.`}:{isValid:!0}:{isValid:!1,error:"Invalid file type. Only PDF files are allowed."}}formatFieldName(e){return e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()).trim()}handleError(e,t,r){this.notificationService.errorMessage({title:"Error",message:t.message||`Failed to ${e}`}),r&&r(!1)}convertMeritValue(e){return e&&{Distinction:"D",Merit:"M",Credit:"C",Pass:"P"}[e]||null}generateYears(){let t=new Date().getFullYear();return Array.from({length:t-1978+1},(r,i)=>1978+i)}markFormGroupTouched(e){Object.keys(e.controls).forEach(t=>{let r=e.get(t);r&&(r.markAsTouched(),r instanceof g&&this.markFormGroupTouched(r))})}isFieldInvalid(e,t,r=!1){let i=e.get(t);return!!(i&&i.invalid&&(i.touched||r))}getErrorMessage(e,t,r){let i=e.get(t);if(!i||!i.errors)return null;let a=this.formatFieldName(t),n=i.errors;if(r){for(let u in n)if(r[u])return r[u]}return n.required?`${a} is required`:n.email?"Please enter a valid email address":n.minlength?`${a} must be at least ${n.minlength.requiredLength} characters`:n.maxlength?`${a} cannot exceed ${n.maxlength.requiredLength} characters`:n.pattern?`${a} format is invalid`:n.min?`${a} must be at least ${n.min.min}`:n.max?`${a} cannot exceed ${n.max.max}`:`${a} is invalid`}isFormValid(e,t,r,i){let a=e.valid&&t&&!r;return i&&i.length>0&&(a=a&&i.every(n=>n===!0)),a}dateRangeValidator(e,t){return r=>{let i=r.get(e)?.value,a=r.get(t)?.value;if(!i||!a)return null;let n=new Date(i),u=new Date(a);return n>u?{dateRangeInvalid:!0}:null}}formatDateForInput(e){return e?new Date(e).toISOString().split("T")[0]:""}getFilteredEndYears(e,t){return e?t.filter(r=>r>=e):t}createLoadingManager(){let e=!1;return{get isLoading(){return e},setLoading:t=>{e=t},withLoading:t=>A(this,null,function*(){e=!0;try{return yield t()}finally{e=!1}})}}navigateWithSuccess(e,t,r){this.notificationService.successMessage({title:"Success",message:r}),e.navigate([t])}confirmDelete(e,t){let r=t||`Are you sure you want to delete this ${e}? This action cannot be undone.`;return this.notificationService.confirmAction("Delete Confirmation",r,"Delete","Cancel")}processFileUpload(e,t){let r=this.validateFile(e);if(!r.isValid){this.notificationService.errorMessage({title:"File Validation Error",message:r.error});return}let i=new FileReader;i.onload=a=>{t({file:e,content:a.target?.result,name:e.name,size:e.size,type:e.type})},i.readAsDataURL(e)}resetFileInput(e){let t=document.getElementById(e);t&&(t.value="")}getPatternErrorMessage(e,t){return{email:"Please enter a valid email address",phone:"Please enter a valid phone number",indexNumber:"Index number format should be like S1234-5678",gpa:"GPA should be a valid decimal number",year:"Please enter a valid 4-digit year",registrationNumber:"Please enter a valid registration number"}[e]||`${this.formatFieldName(t)} format is invalid`}createDestroySubject(){return new I}cleanup(e){e.next(),e.complete()}sortDropdownItems(e){return e.sort((t,r)=>t.name.localeCompare(r.name))}filterDropdownItems(e,t){if(!t.trim())return e;let r=t.toLowerCase();return e.filter(i=>i.name.toLowerCase().includes(r))}};o.\u0275fac=function(t){return new(t||o)(c(E),c(w))},o.\u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"});let s=o;return s})();export{Y as a,te as b};
